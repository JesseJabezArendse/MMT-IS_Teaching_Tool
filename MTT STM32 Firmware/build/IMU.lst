ARM GAS  C:\Temp\ccEjvOHy.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"IMU.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/IMU.c"
  20              		.section	.text.ReadMem,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	ReadMem:
  27              	.LVL0:
  28              	.LFB237:
   1:Core/Src/IMU.c **** //********************************************************************
   2:Core/Src/IMU.c **** //*                      Mech Educational Board                      *
   3:Core/Src/IMU.c **** //*                          IMU Library                             *
   4:Core/Src/IMU.c **** //*==================================================================*
   5:Core/Src/IMU.c **** //* @author:    Jesse Jabez Arendse                                  *
   6:Core/Src/IMU.c **** //* @date:      24-10-2023                                           *
   7:Core/Src/IMU.c **** //*==================================================================*
   8:Core/Src/IMU.c **** 
   9:Core/Src/IMU.c **** #include "main.h"
  10:Core/Src/IMU.c **** #include "IMU.h"
  11:Core/Src/IMU.c **** 
  12:Core/Src/IMU.c **** extern TIM_HandleTypeDef htim2; //to reference htim2 from main.c
  13:Core/Src/IMU.c **** extern I2C_HandleTypeDef hi2c1;
  14:Core/Src/IMU.c **** extern volatile float IMU_Accel[3];
  15:Core/Src/IMU.c **** extern volatile float IMU_Gyro[3];
  16:Core/Src/IMU.c **** 
  17:Core/Src/IMU.c **** uint8_t checking = 0;
  18:Core/Src/IMU.c **** 
  19:Core/Src/IMU.c **** float accel_x = 0;
  20:Core/Src/IMU.c **** float accel_y = 0;
  21:Core/Src/IMU.c **** float accel_z = 0;
  22:Core/Src/IMU.c **** float gyro_x  = 0;
  23:Core/Src/IMU.c **** float gyro_y  = 0;
  24:Core/Src/IMU.c **** float gyro_z  = 0;
  25:Core/Src/IMU.c **** 
  26:Core/Src/IMU.c **** uint16_t accelMem[3];
  27:Core/Src/IMU.c **** uint16_t gyroMem[3];
  28:Core/Src/IMU.c **** 
  29:Core/Src/IMU.c **** short IMUCounter = 0;
  30:Core/Src/IMU.c **** void pollIMU(void){
ARM GAS  C:\Temp\ccEjvOHy.s 			page 2


  31:Core/Src/IMU.c **** 
  32:Core/Src/IMU.c ****     HAL_I2C_Mem_Write(&hi2c1, (IMU_ADDRESS<<1)+0, IMU_WAKE_ADDRESS, 1,(uint8_t*) 0x0, 1, 1000); 
  33:Core/Src/IMU.c **** 
  34:Core/Src/IMU.c ****     HAL_I2C_Mem_Read(&hi2c1, (IMU_ADDRESS<<1)+1, IMU_ACCEL_DATA_ADDRESS, 1, accelMem, sizeof(accelM
  35:Core/Src/IMU.c ****     for (int i = 0 ; i < 3 ; i++){
  36:Core/Src/IMU.c ****         IMU_Accel[i] = signNumber16(accelMem[i])*10/16384.0f;
  37:Core/Src/IMU.c ****     }
  38:Core/Src/IMU.c ****     HAL_I2C_Mem_Read(&hi2c1, (IMU_ADDRESS<<1)+1, IMU_GYRO_DATA_ADDRESS, 1, gyroMem, sizeof(gyroMem)
  39:Core/Src/IMU.c ****     for (int i = 0 ; i < 3 ; i++){
  40:Core/Src/IMU.c ****         IMU_Gyro[i] = signNumber16(gyroMem[i])/131.0f;
  41:Core/Src/IMU.c ****     }
  42:Core/Src/IMU.c **** }
  43:Core/Src/IMU.c **** 
  44:Core/Src/IMU.c **** static void WriteMem(uint8_t devAddress, uint8_t RegisterAddress, uint16_t Value)
  45:Core/Src/IMU.c **** {
  46:Core/Src/IMU.c **** 	uint8_t addr[2];
  47:Core/Src/IMU.c **** 	addr[0] = (Value >> 8) & 0xff;  // upper byte
  48:Core/Src/IMU.c **** 	addr[1] = (Value >> 0) & 0xff; // lower byte
  49:Core/Src/IMU.c **** 	HAL_I2C_Mem_Write(&hi2c1, (devAddress<<1)+0, RegisterAddress, 1, (uint8_t*)addr, 2, HAL_MAX_DELAY)
  50:Core/Src/IMU.c **** }
  51:Core/Src/IMU.c **** 
  52:Core/Src/IMU.c **** static uint16_t ReadMem(uint8_t devAddress, uint8_t RegisterAddress)
  53:Core/Src/IMU.c **** {
  29              		.loc 1 53 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 8
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 53 1 is_stmt 0 view .LVU1
  34 0000 00B5     		push	{lr}
  35              		.cfi_def_cfa_offset 4
  36              		.cfi_offset 14, -4
  37 0002 87B0     		sub	sp, sp, #28
  38              		.cfi_def_cfa_offset 32
  39 0004 0A46     		mov	r2, r1
  54:Core/Src/IMU.c **** 	uint8_t Value[2];
  40              		.loc 1 54 2 is_stmt 1 view .LVU2
  55:Core/Src/IMU.c **** 
  56:Core/Src/IMU.c **** 	HAL_I2C_Mem_Read(&hi2c1, (devAddress<<1)+1, RegisterAddress, 1, Value, 2, HAL_MAX_DELAY);
  41              		.loc 1 56 2 view .LVU3
  42              		.loc 1 56 38 is_stmt 0 view .LVU4
  43 0006 4000     		lsls	r0, r0, #1
  44              	.LVL1:
  45              		.loc 1 56 2 view .LVU5
  46 0008 4FF0FF33 		mov	r3, #-1
  47 000c 0293     		str	r3, [sp, #8]
  48 000e 0223     		movs	r3, #2
  49 0010 0193     		str	r3, [sp, #4]
  50 0012 05AB     		add	r3, sp, #20
  51 0014 0093     		str	r3, [sp]
  52 0016 0123     		movs	r3, #1
  53 0018 C118     		adds	r1, r0, r3
  54              	.LVL2:
  55              		.loc 1 56 2 view .LVU6
  56 001a 0648     		ldr	r0, .L3
  57 001c FFF7FEFF 		bl	HAL_I2C_Mem_Read
  58              	.LVL3:
  57:Core/Src/IMU.c **** 
ARM GAS  C:\Temp\ccEjvOHy.s 			page 3


  58:Core/Src/IMU.c **** 	return ((Value[0] << 8) | Value[1]);
  59              		.loc 1 58 2 is_stmt 1 view .LVU7
  60              		.loc 1 58 16 is_stmt 0 view .LVU8
  61 0020 9DF81400 		ldrb	r0, [sp, #20]	@ zero_extendqisi2
  62              		.loc 1 58 33 view .LVU9
  63 0024 9DF81530 		ldrb	r3, [sp, #21]	@ zero_extendqisi2
  59:Core/Src/IMU.c **** }
  64              		.loc 1 59 1 view .LVU10
  65 0028 43EA0020 		orr	r0, r3, r0, lsl #8
  66 002c 07B0     		add	sp, sp, #28
  67              		.cfi_def_cfa_offset 4
  68              		@ sp needed
  69 002e 5DF804FB 		ldr	pc, [sp], #4
  70              	.L4:
  71 0032 00BF     		.align	2
  72              	.L3:
  73 0034 00000000 		.word	hi2c1
  74              		.cfi_endproc
  75              	.LFE237:
  77              		.section	.text.refreshIMUValues,"ax",%progbits
  78              		.align	1
  79              		.global	refreshIMUValues
  80              		.syntax unified
  81              		.thumb
  82              		.thumb_func
  84              	refreshIMUValues:
  85              	.LFB240:
  60:Core/Src/IMU.c **** 
  61:Core/Src/IMU.c **** float readAccel(short axis){
  62:Core/Src/IMU.c ****     accel_x =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS  ))*10/16384.0f; //because f
  63:Core/Src/IMU.c ****     accel_y =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+2))*10/16384.0f;
  64:Core/Src/IMU.c ****     accel_z =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+4))*10/16384.0f;
  65:Core/Src/IMU.c **** 
  66:Core/Src/IMU.c ****     if (axis == IMU_X_AXIS){
  67:Core/Src/IMU.c ****         return accel_x;
  68:Core/Src/IMU.c ****     }
  69:Core/Src/IMU.c ****     if (axis == IMU_Y_AXIS){
  70:Core/Src/IMU.c ****         return accel_y;
  71:Core/Src/IMU.c ****     }
  72:Core/Src/IMU.c ****     if (axis == IMU_Z_AXIS){
  73:Core/Src/IMU.c ****         return accel_z;
  74:Core/Src/IMU.c ****     }
  75:Core/Src/IMU.c **** }
  76:Core/Src/IMU.c **** 
  77:Core/Src/IMU.c **** float readGyro(short axis){
  78:Core/Src/IMU.c ****     gyro_x = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS  ))/131.0f; //because full rang
  79:Core/Src/IMU.c ****     gyro_y = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+2))/131.0f;
  80:Core/Src/IMU.c ****     gyro_z = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+4))/131.0f;
  81:Core/Src/IMU.c **** 
  82:Core/Src/IMU.c ****     if (axis == IMU_X_AXIS){
  83:Core/Src/IMU.c ****         return gyro_x;
  84:Core/Src/IMU.c ****     }
  85:Core/Src/IMU.c ****     if (axis == IMU_Y_AXIS){
  86:Core/Src/IMU.c ****         return gyro_y;
  87:Core/Src/IMU.c ****     }
  88:Core/Src/IMU.c ****     if (axis == IMU_Z_AXIS){
  89:Core/Src/IMU.c ****         return gyro_z;
ARM GAS  C:\Temp\ccEjvOHy.s 			page 4


  90:Core/Src/IMU.c ****     }
  91:Core/Src/IMU.c **** }
  92:Core/Src/IMU.c **** 
  93:Core/Src/IMU.c **** 
  94:Core/Src/IMU.c **** void refreshIMUValues(){  // this is an interrupt, makes board run slow, dividing the interrupts ta
  86              		.loc 1 94 24 is_stmt 1 view -0
  87              		.cfi_startproc
  88              		@ args = 0, pretend = 0, frame = 0
  89              		@ frame_needed = 0, uses_anonymous_args = 0
  90 0000 10B5     		push	{r4, lr}
  91              		.cfi_def_cfa_offset 8
  92              		.cfi_offset 4, -8
  93              		.cfi_offset 14, -4
  94 0002 2DED028B 		vpush.64	{d8}
  95              		.cfi_def_cfa_offset 16
  96              		.cfi_offset 80, -16
  97              		.cfi_offset 81, -12
  95:Core/Src/IMU.c ****     IMU_Accel[0] =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS  ))*10/16384.0f; //beca
  98              		.loc 1 95 5 view .LVU12
  99              		.loc 1 95 34 is_stmt 0 view .LVU13
 100 0006 3B21     		movs	r1, #59
 101 0008 6920     		movs	r0, #105
 102 000a FFF7FEFF 		bl	ReadMem
 103              	.LVL4:
 104              		.loc 1 95 21 view .LVU14
 105 000e FFF7FEFF 		bl	signNumber16
 106              	.LVL5:
 107              		.loc 1 95 80 view .LVU15
 108 0012 00EB8000 		add	r0, r0, r0, lsl #2
 109 0016 4000     		lsls	r0, r0, #1
 110              		.loc 1 95 83 view .LVU16
 111 0018 07EE900A 		vmov	s15, r0	@ int
 112 001c F8EEE77A 		vcvt.f32.s32	s15, s15
 113 0020 9FED2C8A 		vldr.32	s16, .L7
 114 0024 67EE887A 		vmul.f32	s15, s15, s16
 115              		.loc 1 95 18 view .LVU17
 116 0028 2B4C     		ldr	r4, .L7+4
 117 002a C4ED007A 		vstr.32	s15, [r4]
  96:Core/Src/IMU.c ****     IMU_Accel[1] =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+2))*10/16384.0f;
 118              		.loc 1 96 5 is_stmt 1 view .LVU18
 119              		.loc 1 96 34 is_stmt 0 view .LVU19
 120 002e 3D21     		movs	r1, #61
 121 0030 6920     		movs	r0, #105
 122 0032 FFF7FEFF 		bl	ReadMem
 123              	.LVL6:
 124              		.loc 1 96 21 view .LVU20
 125 0036 FFF7FEFF 		bl	signNumber16
 126              	.LVL7:
 127              		.loc 1 96 80 view .LVU21
 128 003a 00EB8000 		add	r0, r0, r0, lsl #2
 129 003e 4000     		lsls	r0, r0, #1
 130              		.loc 1 96 83 view .LVU22
 131 0040 07EE900A 		vmov	s15, r0	@ int
 132 0044 F8EEE77A 		vcvt.f32.s32	s15, s15
 133 0048 67EE887A 		vmul.f32	s15, s15, s16
 134              		.loc 1 96 18 view .LVU23
 135 004c C4ED017A 		vstr.32	s15, [r4, #4]
ARM GAS  C:\Temp\ccEjvOHy.s 			page 5


  97:Core/Src/IMU.c ****     IMU_Accel[2] =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+4))*10/16384.0f;
 136              		.loc 1 97 5 is_stmt 1 view .LVU24
 137              		.loc 1 97 34 is_stmt 0 view .LVU25
 138 0050 3F21     		movs	r1, #63
 139 0052 6920     		movs	r0, #105
 140 0054 FFF7FEFF 		bl	ReadMem
 141              	.LVL8:
 142              		.loc 1 97 21 view .LVU26
 143 0058 FFF7FEFF 		bl	signNumber16
 144              	.LVL9:
 145              		.loc 1 97 80 view .LVU27
 146 005c 00EB8000 		add	r0, r0, r0, lsl #2
 147 0060 4000     		lsls	r0, r0, #1
 148              		.loc 1 97 83 view .LVU28
 149 0062 07EE900A 		vmov	s15, r0	@ int
 150 0066 F8EEE77A 		vcvt.f32.s32	s15, s15
 151 006a 67EE887A 		vmul.f32	s15, s15, s16
 152              		.loc 1 97 18 view .LVU29
 153 006e C4ED027A 		vstr.32	s15, [r4, #8]
  98:Core/Src/IMU.c **** 
  99:Core/Src/IMU.c ****     IMU_Gyro[0] = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS  ))/131.0f; 
 154              		.loc 1 99 5 is_stmt 1 view .LVU30
 155              		.loc 1 99 32 is_stmt 0 view .LVU31
 156 0072 4321     		movs	r1, #67
 157 0074 6920     		movs	r0, #105
 158 0076 FFF7FEFF 		bl	ReadMem
 159              	.LVL10:
 160              		.loc 1 99 19 view .LVU32
 161 007a FFF7FEFF 		bl	signNumber16
 162              	.LVL11:
 163 007e 07EE900A 		vmov	s15, r0	@ int
 164              		.loc 1 99 77 view .LVU33
 165 0082 F8EEE77A 		vcvt.f32.s32	s15, s15
 166 0086 9FED158A 		vldr.32	s16, .L7+8
 167 008a 87EE887A 		vdiv.f32	s14, s15, s16
 168              		.loc 1 99 17 view .LVU34
 169 008e 144C     		ldr	r4, .L7+12
 170 0090 84ED007A 		vstr.32	s14, [r4]
 100:Core/Src/IMU.c ****     IMU_Gyro[1] = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+2))/131.0f;
 171              		.loc 1 100 5 is_stmt 1 view .LVU35
 172              		.loc 1 100 32 is_stmt 0 view .LVU36
 173 0094 4521     		movs	r1, #69
 174 0096 6920     		movs	r0, #105
 175 0098 FFF7FEFF 		bl	ReadMem
 176              	.LVL12:
 177              		.loc 1 100 19 view .LVU37
 178 009c FFF7FEFF 		bl	signNumber16
 179              	.LVL13:
 180 00a0 07EE900A 		vmov	s15, r0	@ int
 181              		.loc 1 100 77 view .LVU38
 182 00a4 F8EEE77A 		vcvt.f32.s32	s15, s15
 183 00a8 87EE887A 		vdiv.f32	s14, s15, s16
 184              		.loc 1 100 17 view .LVU39
 185 00ac 84ED017A 		vstr.32	s14, [r4, #4]
 101:Core/Src/IMU.c ****     IMU_Gyro[2] = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+4))/131.0f;
 186              		.loc 1 101 5 is_stmt 1 view .LVU40
 187              		.loc 1 101 32 is_stmt 0 view .LVU41
ARM GAS  C:\Temp\ccEjvOHy.s 			page 6


 188 00b0 4721     		movs	r1, #71
 189 00b2 6920     		movs	r0, #105
 190 00b4 FFF7FEFF 		bl	ReadMem
 191              	.LVL14:
 192              		.loc 1 101 19 view .LVU42
 193 00b8 FFF7FEFF 		bl	signNumber16
 194              	.LVL15:
 195 00bc 07EE900A 		vmov	s15, r0	@ int
 196              		.loc 1 101 77 view .LVU43
 197 00c0 F8EEE77A 		vcvt.f32.s32	s15, s15
 198 00c4 87EE887A 		vdiv.f32	s14, s15, s16
 199              		.loc 1 101 17 view .LVU44
 200 00c8 84ED027A 		vstr.32	s14, [r4, #8]
 102:Core/Src/IMU.c **** }
 201              		.loc 1 102 1 view .LVU45
 202 00cc BDEC028B 		vldm	sp!, {d8}
 203              		.cfi_restore 80
 204              		.cfi_restore 81
 205              		.cfi_def_cfa_offset 8
 206 00d0 10BD     		pop	{r4, pc}
 207              	.L8:
 208 00d2 00BF     		.align	2
 209              	.L7:
 210 00d4 00008038 		.word	947912704
 211 00d8 00000000 		.word	IMU_Accel
 212 00dc 00000343 		.word	1124270080
 213 00e0 00000000 		.word	IMU_Gyro
 214              		.cfi_endproc
 215              	.LFE240:
 217              		.section	.text.pollIMU,"ax",%progbits
 218              		.align	1
 219              		.global	pollIMU
 220              		.syntax unified
 221              		.thumb
 222              		.thumb_func
 224              	pollIMU:
 225              	.LFB235:
  30:Core/Src/IMU.c **** 
 226              		.loc 1 30 19 is_stmt 1 view -0
 227              		.cfi_startproc
 228              		@ args = 0, pretend = 0, frame = 0
 229              		@ frame_needed = 0, uses_anonymous_args = 0
 230 0000 70B5     		push	{r4, r5, r6, lr}
 231              		.cfi_def_cfa_offset 16
 232              		.cfi_offset 4, -16
 233              		.cfi_offset 5, -12
 234              		.cfi_offset 6, -8
 235              		.cfi_offset 14, -4
 236 0002 84B0     		sub	sp, sp, #16
 237              		.cfi_def_cfa_offset 32
  32:Core/Src/IMU.c **** 
 238              		.loc 1 32 5 view .LVU47
 239 0004 2C4E     		ldr	r6, .L15
 240 0006 4FF47A73 		mov	r3, #1000
 241 000a 0293     		str	r3, [sp, #8]
 242 000c 0125     		movs	r5, #1
 243 000e 0195     		str	r5, [sp, #4]
ARM GAS  C:\Temp\ccEjvOHy.s 			page 7


 244 0010 0024     		movs	r4, #0
 245 0012 0094     		str	r4, [sp]
 246 0014 2B46     		mov	r3, r5
 247 0016 6B22     		movs	r2, #107
 248 0018 D221     		movs	r1, #210
 249 001a 3046     		mov	r0, r6
 250 001c FFF7FEFF 		bl	HAL_I2C_Mem_Write
 251              	.LVL16:
  34:Core/Src/IMU.c ****     for (int i = 0 ; i < 3 ; i++){
 252              		.loc 1 34 5 view .LVU48
 253 0020 4FF0FF33 		mov	r3, #-1
 254 0024 0293     		str	r3, [sp, #8]
 255 0026 0623     		movs	r3, #6
 256 0028 0193     		str	r3, [sp, #4]
 257 002a 244B     		ldr	r3, .L15+4
 258 002c 0093     		str	r3, [sp]
 259 002e 2B46     		mov	r3, r5
 260 0030 3B22     		movs	r2, #59
 261 0032 D321     		movs	r1, #211
 262 0034 3046     		mov	r0, r6
 263 0036 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 264              	.LVL17:
  35:Core/Src/IMU.c ****         IMU_Accel[i] = signNumber16(accelMem[i])*10/16384.0f;
 265              		.loc 1 35 5 view .LVU49
 266              	.LBB2:
  35:Core/Src/IMU.c ****         IMU_Accel[i] = signNumber16(accelMem[i])*10/16384.0f;
 267              		.loc 1 35 10 view .LVU50
  35:Core/Src/IMU.c ****         IMU_Accel[i] = signNumber16(accelMem[i])*10/16384.0f;
 268              		.loc 1 35 5 is_stmt 0 view .LVU51
 269 003a 15E0     		b	.L10
 270              	.LVL18:
 271              	.L11:
 272              	.LBB3:
  36:Core/Src/IMU.c ****     }
 273              		.loc 1 36 9 is_stmt 1 discriminator 3 view .LVU52
  36:Core/Src/IMU.c ****     }
 274              		.loc 1 36 24 is_stmt 0 discriminator 3 view .LVU53
 275 003c 1F4B     		ldr	r3, .L15+4
 276 003e 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 277 0042 FFF7FEFF 		bl	signNumber16
 278              	.LVL19:
  36:Core/Src/IMU.c ****     }
 279              		.loc 1 36 49 discriminator 3 view .LVU54
 280 0046 00EB8000 		add	r0, r0, r0, lsl #2
 281 004a 4000     		lsls	r0, r0, #1
  36:Core/Src/IMU.c ****     }
 282              		.loc 1 36 52 discriminator 3 view .LVU55
 283 004c 07EE900A 		vmov	s15, r0	@ int
 284 0050 F8EEE77A 		vcvt.f32.s32	s15, s15
 285 0054 9FED1A7A 		vldr.32	s14, .L15+8
 286 0058 67EE877A 		vmul.f32	s15, s15, s14
  36:Core/Src/IMU.c ****     }
 287              		.loc 1 36 22 discriminator 3 view .LVU56
 288 005c 194B     		ldr	r3, .L15+12
 289 005e 03EB8403 		add	r3, r3, r4, lsl #2
 290 0062 C3ED007A 		vstr.32	s15, [r3]
 291              	.LBE3:
ARM GAS  C:\Temp\ccEjvOHy.s 			page 8


  35:Core/Src/IMU.c ****         IMU_Accel[i] = signNumber16(accelMem[i])*10/16384.0f;
 292              		.loc 1 35 31 is_stmt 1 discriminator 3 view .LVU57
 293 0066 0134     		adds	r4, r4, #1
 294              	.LVL20:
 295              	.L10:
  35:Core/Src/IMU.c ****         IMU_Accel[i] = signNumber16(accelMem[i])*10/16384.0f;
 296              		.loc 1 35 24 discriminator 1 view .LVU58
 297 0068 022C     		cmp	r4, #2
 298 006a E7DD     		ble	.L11
 299              	.LBE2:
  38:Core/Src/IMU.c ****     for (int i = 0 ; i < 3 ; i++){
 300              		.loc 1 38 5 view .LVU59
 301 006c 4FF0FF33 		mov	r3, #-1
 302 0070 0293     		str	r3, [sp, #8]
 303 0072 0623     		movs	r3, #6
 304 0074 0193     		str	r3, [sp, #4]
 305 0076 144B     		ldr	r3, .L15+16
 306 0078 0093     		str	r3, [sp]
 307 007a 0123     		movs	r3, #1
 308 007c 4322     		movs	r2, #67
 309 007e D321     		movs	r1, #211
 310 0080 0D48     		ldr	r0, .L15
 311 0082 FFF7FEFF 		bl	HAL_I2C_Mem_Read
 312              	.LVL21:
  39:Core/Src/IMU.c ****         IMU_Gyro[i] = signNumber16(gyroMem[i])/131.0f;
 313              		.loc 1 39 5 view .LVU60
 314              	.LBB4:
  39:Core/Src/IMU.c ****         IMU_Gyro[i] = signNumber16(gyroMem[i])/131.0f;
 315              		.loc 1 39 10 view .LVU61
  39:Core/Src/IMU.c ****         IMU_Gyro[i] = signNumber16(gyroMem[i])/131.0f;
 316              		.loc 1 39 14 is_stmt 0 view .LVU62
 317 0086 0024     		movs	r4, #0
 318              	.LVL22:
  39:Core/Src/IMU.c ****         IMU_Gyro[i] = signNumber16(gyroMem[i])/131.0f;
 319              		.loc 1 39 5 view .LVU63
 320 0088 12E0     		b	.L12
 321              	.LVL23:
 322              	.L13:
 323              	.LBB5:
  40:Core/Src/IMU.c ****     }
 324              		.loc 1 40 9 is_stmt 1 discriminator 3 view .LVU64
  40:Core/Src/IMU.c ****     }
 325              		.loc 1 40 23 is_stmt 0 discriminator 3 view .LVU65
 326 008a 0F4B     		ldr	r3, .L15+16
 327 008c 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 328 0090 FFF7FEFF 		bl	signNumber16
 329              	.LVL24:
 330 0094 07EE900A 		vmov	s15, r0	@ int
  40:Core/Src/IMU.c ****     }
 331              		.loc 1 40 47 discriminator 3 view .LVU66
 332 0098 F8EEE77A 		vcvt.f32.s32	s15, s15
 333 009c DFED0B6A 		vldr.32	s13, .L15+20
 334 00a0 87EEA67A 		vdiv.f32	s14, s15, s13
  40:Core/Src/IMU.c ****     }
 335              		.loc 1 40 21 discriminator 3 view .LVU67
 336 00a4 0A4B     		ldr	r3, .L15+24
 337 00a6 03EB8403 		add	r3, r3, r4, lsl #2
ARM GAS  C:\Temp\ccEjvOHy.s 			page 9


 338 00aa 83ED007A 		vstr.32	s14, [r3]
 339              	.LBE5:
  39:Core/Src/IMU.c ****         IMU_Gyro[i] = signNumber16(gyroMem[i])/131.0f;
 340              		.loc 1 39 31 is_stmt 1 discriminator 3 view .LVU68
 341 00ae 0134     		adds	r4, r4, #1
 342              	.LVL25:
 343              	.L12:
  39:Core/Src/IMU.c ****         IMU_Gyro[i] = signNumber16(gyroMem[i])/131.0f;
 344              		.loc 1 39 24 discriminator 1 view .LVU69
 345 00b0 022C     		cmp	r4, #2
 346 00b2 EADD     		ble	.L13
 347              	.LBE4:
  42:Core/Src/IMU.c **** 
 348              		.loc 1 42 1 is_stmt 0 view .LVU70
 349 00b4 04B0     		add	sp, sp, #16
 350              		.cfi_def_cfa_offset 16
 351              		@ sp needed
 352 00b6 70BD     		pop	{r4, r5, r6, pc}
 353              	.LVL26:
 354              	.L16:
  42:Core/Src/IMU.c **** 
 355              		.loc 1 42 1 view .LVU71
 356              		.align	2
 357              	.L15:
 358 00b8 00000000 		.word	hi2c1
 359 00bc 00000000 		.word	accelMem
 360 00c0 00008038 		.word	947912704
 361 00c4 00000000 		.word	IMU_Accel
 362 00c8 00000000 		.word	gyroMem
 363 00cc 00000343 		.word	1124270080
 364 00d0 00000000 		.word	IMU_Gyro
 365              		.cfi_endproc
 366              	.LFE235:
 368              		.section	.text.readAccel,"ax",%progbits
 369              		.align	1
 370              		.global	readAccel
 371              		.syntax unified
 372              		.thumb
 373              		.thumb_func
 375              	readAccel:
 376              	.LVL27:
 377              	.LFB238:
  61:Core/Src/IMU.c ****     accel_x =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS  ))*10/16384.0f; //because f
 378              		.loc 1 61 28 is_stmt 1 view -0
 379              		.cfi_startproc
 380              		@ args = 0, pretend = 0, frame = 0
 381              		@ frame_needed = 0, uses_anonymous_args = 0
  61:Core/Src/IMU.c ****     accel_x =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS  ))*10/16384.0f; //because f
 382              		.loc 1 61 28 is_stmt 0 view .LVU73
 383 0000 10B5     		push	{r4, lr}
 384              		.cfi_def_cfa_offset 8
 385              		.cfi_offset 4, -8
 386              		.cfi_offset 14, -4
 387 0002 2DED028B 		vpush.64	{d8}
 388              		.cfi_def_cfa_offset 16
 389              		.cfi_offset 80, -16
 390              		.cfi_offset 81, -12
ARM GAS  C:\Temp\ccEjvOHy.s 			page 10


 391 0006 0446     		mov	r4, r0
  62:Core/Src/IMU.c ****     accel_y =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+2))*10/16384.0f;
 392              		.loc 1 62 5 is_stmt 1 view .LVU74
  62:Core/Src/IMU.c ****     accel_y =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+2))*10/16384.0f;
 393              		.loc 1 62 29 is_stmt 0 view .LVU75
 394 0008 3B21     		movs	r1, #59
 395 000a 6920     		movs	r0, #105
 396              	.LVL28:
  62:Core/Src/IMU.c ****     accel_y =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+2))*10/16384.0f;
 397              		.loc 1 62 29 view .LVU76
 398 000c FFF7FEFF 		bl	ReadMem
 399              	.LVL29:
  62:Core/Src/IMU.c ****     accel_y =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+2))*10/16384.0f;
 400              		.loc 1 62 16 view .LVU77
 401 0010 FFF7FEFF 		bl	signNumber16
 402              	.LVL30:
  62:Core/Src/IMU.c ****     accel_y =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+2))*10/16384.0f;
 403              		.loc 1 62 75 view .LVU78
 404 0014 00EB8000 		add	r0, r0, r0, lsl #2
 405 0018 4000     		lsls	r0, r0, #1
  62:Core/Src/IMU.c ****     accel_y =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+2))*10/16384.0f;
 406              		.loc 1 62 78 view .LVU79
 407 001a 07EE900A 		vmov	s15, r0	@ int
 408 001e F8EEE77A 		vcvt.f32.s32	s15, s15
 409 0022 9FED1D8A 		vldr.32	s16, .L24
 410 0026 67EE887A 		vmul.f32	s15, s15, s16
  62:Core/Src/IMU.c ****     accel_y =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+2))*10/16384.0f;
 411              		.loc 1 62 13 view .LVU80
 412 002a 1C4B     		ldr	r3, .L24+4
 413 002c C3ED007A 		vstr.32	s15, [r3]
  63:Core/Src/IMU.c ****     accel_z =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+4))*10/16384.0f;
 414              		.loc 1 63 5 is_stmt 1 view .LVU81
  63:Core/Src/IMU.c ****     accel_z =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+4))*10/16384.0f;
 415              		.loc 1 63 29 is_stmt 0 view .LVU82
 416 0030 3D21     		movs	r1, #61
 417 0032 6920     		movs	r0, #105
 418 0034 FFF7FEFF 		bl	ReadMem
 419              	.LVL31:
  63:Core/Src/IMU.c ****     accel_z =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+4))*10/16384.0f;
 420              		.loc 1 63 16 view .LVU83
 421 0038 FFF7FEFF 		bl	signNumber16
 422              	.LVL32:
  63:Core/Src/IMU.c ****     accel_z =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+4))*10/16384.0f;
 423              		.loc 1 63 75 view .LVU84
 424 003c 00EB8000 		add	r0, r0, r0, lsl #2
 425 0040 4000     		lsls	r0, r0, #1
  63:Core/Src/IMU.c ****     accel_z =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+4))*10/16384.0f;
 426              		.loc 1 63 78 view .LVU85
 427 0042 07EE900A 		vmov	s15, r0	@ int
 428 0046 F8EEE77A 		vcvt.f32.s32	s15, s15
 429 004a 67EE887A 		vmul.f32	s15, s15, s16
  63:Core/Src/IMU.c ****     accel_z =  signNumber16(ReadMem(IMU_ADDRESS,IMU_ACCEL_DATA_ADDRESS+4))*10/16384.0f;
 430              		.loc 1 63 13 view .LVU86
 431 004e 144B     		ldr	r3, .L24+8
 432 0050 C3ED007A 		vstr.32	s15, [r3]
  64:Core/Src/IMU.c **** 
 433              		.loc 1 64 5 is_stmt 1 view .LVU87
ARM GAS  C:\Temp\ccEjvOHy.s 			page 11


  64:Core/Src/IMU.c **** 
 434              		.loc 1 64 29 is_stmt 0 view .LVU88
 435 0054 3F21     		movs	r1, #63
 436 0056 6920     		movs	r0, #105
 437 0058 FFF7FEFF 		bl	ReadMem
 438              	.LVL33:
  64:Core/Src/IMU.c **** 
 439              		.loc 1 64 16 view .LVU89
 440 005c FFF7FEFF 		bl	signNumber16
 441              	.LVL34:
  64:Core/Src/IMU.c **** 
 442              		.loc 1 64 75 view .LVU90
 443 0060 00EB8000 		add	r0, r0, r0, lsl #2
 444 0064 4300     		lsls	r3, r0, #1
 445 0066 00EE103A 		vmov	s0, r3	@ int
  64:Core/Src/IMU.c **** 
 446              		.loc 1 64 78 view .LVU91
 447 006a B8EEC00A 		vcvt.f32.s32	s0, s0
 448 006e 20EE080A 		vmul.f32	s0, s0, s16
  64:Core/Src/IMU.c **** 
 449              		.loc 1 64 13 view .LVU92
 450 0072 0C4B     		ldr	r3, .L24+12
 451 0074 83ED000A 		vstr.32	s0, [r3]
  66:Core/Src/IMU.c ****         return accel_x;
 452              		.loc 1 66 5 is_stmt 1 view .LVU93
  66:Core/Src/IMU.c ****         return accel_x;
 453              		.loc 1 66 8 is_stmt 0 view .LVU94
 454 0078 2CB1     		cbz	r4, .L22
  69:Core/Src/IMU.c ****         return accel_y;
 455              		.loc 1 69 5 is_stmt 1 view .LVU95
  69:Core/Src/IMU.c ****         return accel_y;
 456              		.loc 1 69 8 is_stmt 0 view .LVU96
 457 007a 012C     		cmp	r4, #1
 458 007c 07D0     		beq	.L23
  72:Core/Src/IMU.c ****         return accel_z;
 459              		.loc 1 72 5 is_stmt 1 view .LVU97
  72:Core/Src/IMU.c ****         return accel_z;
 460              		.loc 1 72 8 is_stmt 0 view .LVU98
 461 007e 022C     		cmp	r4, #2
 462              	.L17:
  75:Core/Src/IMU.c **** 
 463              		.loc 1 75 1 view .LVU99
 464 0080 BDEC028B 		vldm	sp!, {d8}
 465              		.cfi_remember_state
 466              		.cfi_restore 80
 467              		.cfi_restore 81
 468              		.cfi_def_cfa_offset 8
 469 0084 10BD     		pop	{r4, pc}
 470              	.L22:
 471              		.cfi_restore_state
  67:Core/Src/IMU.c ****     }
 472              		.loc 1 67 9 is_stmt 1 view .LVU100
  67:Core/Src/IMU.c ****     }
 473              		.loc 1 67 16 is_stmt 0 view .LVU101
 474 0086 054B     		ldr	r3, .L24+4
 475 0088 93ED000A 		vldr.32	s0, [r3]
 476 008c F8E7     		b	.L17
ARM GAS  C:\Temp\ccEjvOHy.s 			page 12


 477              	.L23:
  70:Core/Src/IMU.c ****     }
 478              		.loc 1 70 9 is_stmt 1 view .LVU102
  70:Core/Src/IMU.c ****     }
 479              		.loc 1 70 16 is_stmt 0 view .LVU103
 480 008e 044B     		ldr	r3, .L24+8
 481 0090 93ED000A 		vldr.32	s0, [r3]
 482 0094 F4E7     		b	.L17
 483              	.L25:
 484 0096 00BF     		.align	2
 485              	.L24:
 486 0098 00008038 		.word	947912704
 487 009c 00000000 		.word	accel_x
 488 00a0 00000000 		.word	accel_y
 489 00a4 00000000 		.word	accel_z
 490              		.cfi_endproc
 491              	.LFE238:
 493              		.section	.text.readGyro,"ax",%progbits
 494              		.align	1
 495              		.global	readGyro
 496              		.syntax unified
 497              		.thumb
 498              		.thumb_func
 500              	readGyro:
 501              	.LVL35:
 502              	.LFB239:
  77:Core/Src/IMU.c ****     gyro_x = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS  ))/131.0f; //because full rang
 503              		.loc 1 77 27 is_stmt 1 view -0
 504              		.cfi_startproc
 505              		@ args = 0, pretend = 0, frame = 0
 506              		@ frame_needed = 0, uses_anonymous_args = 0
  77:Core/Src/IMU.c ****     gyro_x = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS  ))/131.0f; //because full rang
 507              		.loc 1 77 27 is_stmt 0 view .LVU105
 508 0000 10B5     		push	{r4, lr}
 509              		.cfi_def_cfa_offset 8
 510              		.cfi_offset 4, -8
 511              		.cfi_offset 14, -4
 512 0002 2DED028B 		vpush.64	{d8}
 513              		.cfi_def_cfa_offset 16
 514              		.cfi_offset 80, -16
 515              		.cfi_offset 81, -12
 516 0006 0446     		mov	r4, r0
  78:Core/Src/IMU.c ****     gyro_y = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+2))/131.0f;
 517              		.loc 1 78 5 is_stmt 1 view .LVU106
  78:Core/Src/IMU.c ****     gyro_y = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+2))/131.0f;
 518              		.loc 1 78 27 is_stmt 0 view .LVU107
 519 0008 4321     		movs	r1, #67
 520 000a 6920     		movs	r0, #105
 521              	.LVL36:
  78:Core/Src/IMU.c ****     gyro_y = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+2))/131.0f;
 522              		.loc 1 78 27 view .LVU108
 523 000c FFF7FEFF 		bl	ReadMem
 524              	.LVL37:
  78:Core/Src/IMU.c ****     gyro_y = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+2))/131.0f;
 525              		.loc 1 78 14 view .LVU109
 526 0010 FFF7FEFF 		bl	signNumber16
 527              	.LVL38:
ARM GAS  C:\Temp\ccEjvOHy.s 			page 13


 528 0014 07EE900A 		vmov	s15, r0	@ int
  78:Core/Src/IMU.c ****     gyro_y = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+2))/131.0f;
 529              		.loc 1 78 72 view .LVU110
 530 0018 F8EEE77A 		vcvt.f32.s32	s15, s15
 531 001c 9FED198A 		vldr.32	s16, .L33
 532 0020 87EE887A 		vdiv.f32	s14, s15, s16
  78:Core/Src/IMU.c ****     gyro_y = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+2))/131.0f;
 533              		.loc 1 78 12 view .LVU111
 534 0024 184B     		ldr	r3, .L33+4
 535 0026 83ED007A 		vstr.32	s14, [r3]
  79:Core/Src/IMU.c ****     gyro_z = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+4))/131.0f;
 536              		.loc 1 79 5 is_stmt 1 view .LVU112
  79:Core/Src/IMU.c ****     gyro_z = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+4))/131.0f;
 537              		.loc 1 79 27 is_stmt 0 view .LVU113
 538 002a 4521     		movs	r1, #69
 539 002c 6920     		movs	r0, #105
 540 002e FFF7FEFF 		bl	ReadMem
 541              	.LVL39:
  79:Core/Src/IMU.c ****     gyro_z = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+4))/131.0f;
 542              		.loc 1 79 14 view .LVU114
 543 0032 FFF7FEFF 		bl	signNumber16
 544              	.LVL40:
 545 0036 07EE900A 		vmov	s15, r0	@ int
  79:Core/Src/IMU.c ****     gyro_z = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+4))/131.0f;
 546              		.loc 1 79 72 view .LVU115
 547 003a F8EEE77A 		vcvt.f32.s32	s15, s15
 548 003e 87EE887A 		vdiv.f32	s14, s15, s16
  79:Core/Src/IMU.c ****     gyro_z = signNumber16(ReadMem(IMU_ADDRESS,IMU_GYRO_DATA_ADDRESS+4))/131.0f;
 549              		.loc 1 79 12 view .LVU116
 550 0042 124B     		ldr	r3, .L33+8
 551 0044 83ED007A 		vstr.32	s14, [r3]
  80:Core/Src/IMU.c **** 
 552              		.loc 1 80 5 is_stmt 1 view .LVU117
  80:Core/Src/IMU.c **** 
 553              		.loc 1 80 27 is_stmt 0 view .LVU118
 554 0048 4721     		movs	r1, #71
 555 004a 6920     		movs	r0, #105
 556 004c FFF7FEFF 		bl	ReadMem
 557              	.LVL41:
  80:Core/Src/IMU.c **** 
 558              		.loc 1 80 14 view .LVU119
 559 0050 FFF7FEFF 		bl	signNumber16
 560              	.LVL42:
 561 0054 07EE900A 		vmov	s15, r0	@ int
  80:Core/Src/IMU.c **** 
 562              		.loc 1 80 72 view .LVU120
 563 0058 F8EEE77A 		vcvt.f32.s32	s15, s15
 564 005c 87EE880A 		vdiv.f32	s0, s15, s16
  80:Core/Src/IMU.c **** 
 565              		.loc 1 80 12 view .LVU121
 566 0060 0B4B     		ldr	r3, .L33+12
 567 0062 83ED000A 		vstr.32	s0, [r3]
  82:Core/Src/IMU.c ****         return gyro_x;
 568              		.loc 1 82 5 is_stmt 1 view .LVU122
  82:Core/Src/IMU.c ****         return gyro_x;
 569              		.loc 1 82 8 is_stmt 0 view .LVU123
 570 0066 2CB1     		cbz	r4, .L31
ARM GAS  C:\Temp\ccEjvOHy.s 			page 14


  85:Core/Src/IMU.c ****         return gyro_y;
 571              		.loc 1 85 5 is_stmt 1 view .LVU124
  85:Core/Src/IMU.c ****         return gyro_y;
 572              		.loc 1 85 8 is_stmt 0 view .LVU125
 573 0068 012C     		cmp	r4, #1
 574 006a 07D0     		beq	.L32
  88:Core/Src/IMU.c ****         return gyro_z;
 575              		.loc 1 88 5 is_stmt 1 view .LVU126
  88:Core/Src/IMU.c ****         return gyro_z;
 576              		.loc 1 88 8 is_stmt 0 view .LVU127
 577 006c 022C     		cmp	r4, #2
 578              	.L26:
  91:Core/Src/IMU.c **** 
 579              		.loc 1 91 1 view .LVU128
 580 006e BDEC028B 		vldm	sp!, {d8}
 581              		.cfi_remember_state
 582              		.cfi_restore 80
 583              		.cfi_restore 81
 584              		.cfi_def_cfa_offset 8
 585 0072 10BD     		pop	{r4, pc}
 586              	.L31:
 587              		.cfi_restore_state
  83:Core/Src/IMU.c ****     }
 588              		.loc 1 83 9 is_stmt 1 view .LVU129
  83:Core/Src/IMU.c ****     }
 589              		.loc 1 83 16 is_stmt 0 view .LVU130
 590 0074 044B     		ldr	r3, .L33+4
 591 0076 93ED000A 		vldr.32	s0, [r3]
 592 007a F8E7     		b	.L26
 593              	.L32:
  86:Core/Src/IMU.c ****     }
 594              		.loc 1 86 9 is_stmt 1 view .LVU131
  86:Core/Src/IMU.c ****     }
 595              		.loc 1 86 16 is_stmt 0 view .LVU132
 596 007c 034B     		ldr	r3, .L33+8
 597 007e 93ED000A 		vldr.32	s0, [r3]
 598 0082 F4E7     		b	.L26
 599              	.L34:
 600              		.align	2
 601              	.L33:
 602 0084 00000343 		.word	1124270080
 603 0088 00000000 		.word	gyro_x
 604 008c 00000000 		.word	gyro_y
 605 0090 00000000 		.word	gyro_z
 606              		.cfi_endproc
 607              	.LFE239:
 609              		.section	.text.init_IMU,"ax",%progbits
 610              		.align	1
 611              		.global	init_IMU
 612              		.syntax unified
 613              		.thumb
 614              		.thumb_func
 616              	init_IMU:
 617              	.LFB241:
 103:Core/Src/IMU.c **** 
 104:Core/Src/IMU.c **** void init_IMU(){
 618              		.loc 1 104 16 is_stmt 1 view -0
ARM GAS  C:\Temp\ccEjvOHy.s 			page 15


 619              		.cfi_startproc
 620              		@ args = 0, pretend = 0, frame = 0
 621              		@ frame_needed = 0, uses_anonymous_args = 0
 622 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 623              		.cfi_def_cfa_offset 20
 624              		.cfi_offset 4, -20
 625              		.cfi_offset 5, -16
 626              		.cfi_offset 6, -12
 627              		.cfi_offset 7, -8
 628              		.cfi_offset 14, -4
 629 0002 85B0     		sub	sp, sp, #20
 630              		.cfi_def_cfa_offset 40
 105:Core/Src/IMU.c ****     HAL_TIM_RegisterCallback(&htim6,HAL_TIM_PERIOD_ELAPSED_CB_ID,refreshIMUValues);
 631              		.loc 1 105 5 view .LVU134
 632 0004 1A4C     		ldr	r4, .L37
 633 0006 1B4A     		ldr	r2, .L37+4
 634 0008 0E21     		movs	r1, #14
 635 000a 2046     		mov	r0, r4
 636 000c FFF7FEFF 		bl	HAL_TIM_RegisterCallback
 637              	.LVL43:
 106:Core/Src/IMU.c ****     HAL_TIM_Base_Start_IT(&htim6); //timer set to 1Hz to prevent exceeding IMU max reading rate whi
 638              		.loc 1 106 5 view .LVU135
 639 0010 2046     		mov	r0, r4
 640 0012 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 641              	.LVL44:
 107:Core/Src/IMU.c **** 
 108:Core/Src/IMU.c **** 
 109:Core/Src/IMU.c ****     HAL_I2C_Mem_Write(&hi2c1, (IMU_ADDRESS<<1)+0, IMU_WAKE_ADDRESS, 1,(uint8_t*) 0x0, 1            
 642              		.loc 1 109 5 view .LVU136
 643 0016 184D     		ldr	r5, .L37+8
 644 0018 4FF47A76 		mov	r6, #1000
 645 001c 0296     		str	r6, [sp, #8]
 646 001e 0124     		movs	r4, #1
 647 0020 0194     		str	r4, [sp, #4]
 648 0022 0027     		movs	r7, #0
 649 0024 0097     		str	r7, [sp]
 650 0026 2346     		mov	r3, r4
 651 0028 6B22     		movs	r2, #107
 652 002a D221     		movs	r1, #210
 653 002c 2846     		mov	r0, r5
 654 002e FFF7FEFF 		bl	HAL_I2C_Mem_Write
 655              	.LVL45:
 110:Core/Src/IMU.c ****     HAL_I2C_Mem_Write(&hi2c1, (IMU_ADDRESS<<1)+0, IMU_OUTPUT_RATE_ADDRESS, 1, (uint8_t*) IMU_OUTPUT
 656              		.loc 1 110 5 view .LVU137
 657 0032 0296     		str	r6, [sp, #8]
 658 0034 0194     		str	r4, [sp, #4]
 659 0036 0723     		movs	r3, #7
 660 0038 0093     		str	r3, [sp]
 661 003a 2346     		mov	r3, r4
 662 003c 1922     		movs	r2, #25
 663 003e D221     		movs	r1, #210
 664 0040 2846     		mov	r0, r5
 665 0042 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 666              	.LVL46:
 111:Core/Src/IMU.c ****     HAL_I2C_Mem_Write(&hi2c1, (IMU_ADDRESS<<1)+0, IMU_ACCEL_CONFIG_ADDRESS, 1,(uint8_t*) 0x0, 1    
 667              		.loc 1 111 5 view .LVU138
 668 0046 0296     		str	r6, [sp, #8]
ARM GAS  C:\Temp\ccEjvOHy.s 			page 16


 669 0048 0194     		str	r4, [sp, #4]
 670 004a 0097     		str	r7, [sp]
 671 004c 2346     		mov	r3, r4
 672 004e 1C22     		movs	r2, #28
 673 0050 D221     		movs	r1, #210
 674 0052 2846     		mov	r0, r5
 675 0054 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 676              	.LVL47:
 112:Core/Src/IMU.c ****     HAL_I2C_Mem_Write(&hi2c1, (IMU_ADDRESS<<1)+0, IMU_GYRO_CONFIG_ADDRESS, 1,(uint8_t*) 0x0, 1     
 677              		.loc 1 112 5 view .LVU139
 678 0058 0296     		str	r6, [sp, #8]
 679 005a 0194     		str	r4, [sp, #4]
 680 005c 0097     		str	r7, [sp]
 681 005e 2346     		mov	r3, r4
 682 0060 1B22     		movs	r2, #27
 683 0062 D221     		movs	r1, #210
 684 0064 2846     		mov	r0, r5
 685 0066 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 686              	.LVL48:
 113:Core/Src/IMU.c **** 
 114:Core/Src/IMU.c **** 
 115:Core/Src/IMU.c **** }
 687              		.loc 1 115 1 is_stmt 0 view .LVU140
 688 006a 05B0     		add	sp, sp, #20
 689              		.cfi_def_cfa_offset 20
 690              		@ sp needed
 691 006c F0BD     		pop	{r4, r5, r6, r7, pc}
 692              	.L38:
 693 006e 00BF     		.align	2
 694              	.L37:
 695 0070 00000000 		.word	htim6
 696 0074 00000000 		.word	refreshIMUValues
 697 0078 00000000 		.word	hi2c1
 698              		.cfi_endproc
 699              	.LFE241:
 701              		.global	IMUCounter
 702              		.section	.bss.IMUCounter,"aw",%nobits
 703              		.align	1
 706              	IMUCounter:
 707 0000 0000     		.space	2
 708              		.global	gyroMem
 709              		.section	.bss.gyroMem,"aw",%nobits
 710              		.align	2
 713              	gyroMem:
 714 0000 00000000 		.space	6
 714      0000
 715              		.global	accelMem
 716              		.section	.bss.accelMem,"aw",%nobits
 717              		.align	2
 720              	accelMem:
 721 0000 00000000 		.space	6
 721      0000
 722              		.global	gyro_z
 723              		.section	.bss.gyro_z,"aw",%nobits
 724              		.align	2
 727              	gyro_z:
 728 0000 00000000 		.space	4
ARM GAS  C:\Temp\ccEjvOHy.s 			page 17


 729              		.global	gyro_y
 730              		.section	.bss.gyro_y,"aw",%nobits
 731              		.align	2
 734              	gyro_y:
 735 0000 00000000 		.space	4
 736              		.global	gyro_x
 737              		.section	.bss.gyro_x,"aw",%nobits
 738              		.align	2
 741              	gyro_x:
 742 0000 00000000 		.space	4
 743              		.global	accel_z
 744              		.section	.bss.accel_z,"aw",%nobits
 745              		.align	2
 748              	accel_z:
 749 0000 00000000 		.space	4
 750              		.global	accel_y
 751              		.section	.bss.accel_y,"aw",%nobits
 752              		.align	2
 755              	accel_y:
 756 0000 00000000 		.space	4
 757              		.global	accel_x
 758              		.section	.bss.accel_x,"aw",%nobits
 759              		.align	2
 762              	accel_x:
 763 0000 00000000 		.space	4
 764              		.global	checking
 765              		.section	.bss.checking,"aw",%nobits
 768              	checking:
 769 0000 00       		.space	1
 770              		.text
 771              	.Letext0:
 772              		.file 2 "c:\\users\\jessejabezarendse\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-
 773              		.file 3 "c:\\users\\jessejabezarendse\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-
 774              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 775              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 776              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 777              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 778              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 779              		.file 9 "Core/Inc/IMU.h"
ARM GAS  C:\Temp\ccEjvOHy.s 			page 18


DEFINED SYMBOLS
                            *ABS*:00000000 IMU.c
  C:\Temp\ccEjvOHy.s:21     .text.ReadMem:00000000 $t
  C:\Temp\ccEjvOHy.s:26     .text.ReadMem:00000000 ReadMem
  C:\Temp\ccEjvOHy.s:73     .text.ReadMem:00000034 $d
  C:\Temp\ccEjvOHy.s:78     .text.refreshIMUValues:00000000 $t
  C:\Temp\ccEjvOHy.s:84     .text.refreshIMUValues:00000000 refreshIMUValues
  C:\Temp\ccEjvOHy.s:210    .text.refreshIMUValues:000000d4 $d
  C:\Temp\ccEjvOHy.s:218    .text.pollIMU:00000000 $t
  C:\Temp\ccEjvOHy.s:224    .text.pollIMU:00000000 pollIMU
  C:\Temp\ccEjvOHy.s:358    .text.pollIMU:000000b8 $d
  C:\Temp\ccEjvOHy.s:720    .bss.accelMem:00000000 accelMem
  C:\Temp\ccEjvOHy.s:713    .bss.gyroMem:00000000 gyroMem
  C:\Temp\ccEjvOHy.s:369    .text.readAccel:00000000 $t
  C:\Temp\ccEjvOHy.s:375    .text.readAccel:00000000 readAccel
  C:\Temp\ccEjvOHy.s:486    .text.readAccel:00000098 $d
  C:\Temp\ccEjvOHy.s:762    .bss.accel_x:00000000 accel_x
  C:\Temp\ccEjvOHy.s:755    .bss.accel_y:00000000 accel_y
  C:\Temp\ccEjvOHy.s:748    .bss.accel_z:00000000 accel_z
  C:\Temp\ccEjvOHy.s:494    .text.readGyro:00000000 $t
  C:\Temp\ccEjvOHy.s:500    .text.readGyro:00000000 readGyro
  C:\Temp\ccEjvOHy.s:602    .text.readGyro:00000084 $d
  C:\Temp\ccEjvOHy.s:741    .bss.gyro_x:00000000 gyro_x
  C:\Temp\ccEjvOHy.s:734    .bss.gyro_y:00000000 gyro_y
  C:\Temp\ccEjvOHy.s:727    .bss.gyro_z:00000000 gyro_z
  C:\Temp\ccEjvOHy.s:610    .text.init_IMU:00000000 $t
  C:\Temp\ccEjvOHy.s:616    .text.init_IMU:00000000 init_IMU
  C:\Temp\ccEjvOHy.s:695    .text.init_IMU:00000070 $d
  C:\Temp\ccEjvOHy.s:706    .bss.IMUCounter:00000000 IMUCounter
  C:\Temp\ccEjvOHy.s:703    .bss.IMUCounter:00000000 $d
  C:\Temp\ccEjvOHy.s:710    .bss.gyroMem:00000000 $d
  C:\Temp\ccEjvOHy.s:717    .bss.accelMem:00000000 $d
  C:\Temp\ccEjvOHy.s:724    .bss.gyro_z:00000000 $d
  C:\Temp\ccEjvOHy.s:731    .bss.gyro_y:00000000 $d
  C:\Temp\ccEjvOHy.s:738    .bss.gyro_x:00000000 $d
  C:\Temp\ccEjvOHy.s:745    .bss.accel_z:00000000 $d
  C:\Temp\ccEjvOHy.s:752    .bss.accel_y:00000000 $d
  C:\Temp\ccEjvOHy.s:759    .bss.accel_x:00000000 $d
  C:\Temp\ccEjvOHy.s:768    .bss.checking:00000000 checking
  C:\Temp\ccEjvOHy.s:769    .bss.checking:00000000 $d

UNDEFINED SYMBOLS
HAL_I2C_Mem_Read
hi2c1
signNumber16
IMU_Accel
IMU_Gyro
HAL_I2C_Mem_Write
HAL_TIM_RegisterCallback
HAL_TIM_Base_Start_IT
htim6
